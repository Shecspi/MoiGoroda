{% extends 'base.html' %}
{% load vite %}

{% block extra_css %}
    {{ block.super }}
    {% vite_css 'css/tailwind' %}
{% endblock %}

{% block extra_js %}
    {{ block.super }}
    {% vite_asset 'js/entries/content_image_gallery.js' %}
{% endblock %}

{% block content %}
    <!-- Заголовок страницы -->
    <header class="mx-3 mt-10 mb-8 text-center" id="block-page_header">
        <h1 class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl lg:text-5xl dark:text-white">
            Блог проекта «Мои города»
        </h1>
    </header>
    <!-- ^^^ Заголовок страницы -->

    <div class="mx-3 mb-8 flex justify-center">
        <div class="w-full max-w-4xl">
            {% for article in article_list %}
                <div class="mb-6 rounded-xl border border-gray-200 bg-white p-6 shadow-sm dark:border-neutral-700 dark:bg-neutral-900" id="article_{{ article.id }}">
                    <!-- Заголовок статьи -->
                    <h2 class="mb-3 text-xl font-semibold text-gray-900 dark:text-white">
                        <a href="{% url 'blog-article-detail' pk=article.pk %}"
                           class="hover:text-blue-600 dark:hover:text-blue-400 hover:underline">
                            {{ article.title }}
                        </a>
                    </h2>
                    <!-- Краткое содержание -->
                    <div class="content-with-image-gallery text-gray-700 dark:text-neutral-300 [&_h1]:text-xl [&_h1]:font-bold [&_h2]:text-lg [&_h2]:font-semibold [&_p]:mb-2 [&_ul]:list-disc [&_ul]:ml-6 [&_ol]:list-decimal [&_ol]:ml-6 [&_a]:text-blue-600 [&_a]:dark:text-blue-400 [&_a]:hover:underline [&_img]:max-w-full [&_img]:h-auto [&_img]:rounded-lg [&_img]:mb-4 [&_img]:cursor-pointer [&_img]:transition-opacity [&_img]:duration-200 [&_img]:hover:opacity-90">
                        {{ article.content|truncatewords_html:150|safe }}
                    </div>

                    <!-- Разделитель -->
                    <hr class="my-4 border-gray-200 dark:border-neutral-700">

                    <!-- Футер с метаданными -->
                    <div class="flex flex-wrap items-center gap-4 text-sm text-gray-600 dark:text-neutral-400">
                        {% if article.city %}
                            <div class="flex items-center gap-2">
                                <a href="{{ article.city.get_absolute_url }}"
                                   class="text-blue-600 hover:underline dark:text-blue-400">
                                    {{ article.city.title }}
                                </a>
                            </div>
                        {% endif %}
                        {% if article.tags.exists %}
                            <div class="flex flex-wrap items-center gap-2">
                                {% for tag in article.tags.all %}
                                    <span class="rounded-full bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-700 dark:bg-neutral-700 dark:text-neutral-300">{{ tag.name }}</span>
                                {% endfor %}
                            </div>
                        {% endif %}
                        <div class="ml-auto flex items-center gap-2">
                            <span class="font-medium">Создано:</span>
                            <span>{{ article.created_at }}</span>
                        </div>
                    </div>
                </div>
            {% empty %}
                <div class="rounded-xl border border-gray-200 bg-white p-6 shadow-sm dark:border-neutral-700 dark:bg-neutral-900">
                    <div class="text-center text-gray-600 dark:text-neutral-400">
                        На данный момент нет ни одной статьи.
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>

    <!-- Пагинация -->
    {% include 'parts/pagination.html' %}
    <!-- ^^^ Пагинация -->
{% endblock %}
