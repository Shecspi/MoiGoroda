{% extends 'base.html' %}
{% load vite %}

{% block extra_css %}
    {{ block.super }}
    {% vite_css 'css/tailwind' %}
{% endblock %}

{% block content %}
    <header class="mx-3 mt-10 mb-8 text-center">
        <h1 class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl lg:text-5xl dark:text-white">
            Профиль
        </h1>
    </header>

    <!-- Форма изменения профиля -->
    <div class="mx-3 mb-8 flex justify-center">
        <div class="w-full max-w-2xl">
            <div class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm dark:border-neutral-700 dark:bg-neutral-900">
                <form method="post" class="space-y-3">
                    {% csrf_token %}
                    
                    <!-- Имя пользователя -->
                    <div>
                        <label for="{{ form.username.id_for_label }}" class="mb-2 block text-sm font-medium dark:text-white">
                            {{ form.username.label }}
                            {% if form.username.field.required %}<span class="text-red-600 dark:text-red-500">*</span>{% endif %}
                        </label>
                        <div class="relative">
                            <input type="text"
                                   name="{{ form.username.name }}"
                                   id="{{ form.username.id_for_label }}"
                                   value="{{ form.username.value|default:'' }}"
                                   class="py-2.5 sm:py-3 px-4 ps-11 block w-full border border-gray-200 rounded-lg bg-white sm:text-sm focus:z-10 focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600 {% if form.username.errors %}border-red-500 dark:border-red-500{% endif %}"
                                   placeholder="Введите имя пользователя"
                                   required>
                            <div class="absolute inset-y-0 start-0 flex items-center pointer-events-none z-20 ps-4">
                                <svg class="shrink-0 size-4 text-gray-400 dark:text-neutral-600" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="12" cy="7" r="4"></circle>
                                </svg>
                            </div>
                        </div>
                        {% if form.username.help_text %}
                            <p class="mt-1 text-xs text-gray-500 dark:text-neutral-500">{{ form.username.help_text }}</p>
                        {% endif %}
                        {% if form.username.errors %}
                            <div class="mt-2 text-xs text-red-600 dark:text-red-500">
                                {{ form.username.errors }}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Электронная почта -->
                    <div>
                        <label for="{{ form.email.id_for_label }}" class="mb-2 block text-sm font-medium dark:text-white">
                            {{ form.email.label }}
                            {% if form.email.field.required %}<span class="text-red-600 dark:text-red-500">*</span>{% endif %}
                        </label>
                        <div class="relative">
                            <input type="email"
                                   name="{{ form.email.name }}"
                                   id="{{ form.email.id_for_label }}"
                                   value="{{ form.email.value|default:'' }}"
                                   class="py-2.5 sm:py-3 px-4 ps-11 block w-full border border-gray-200 rounded-lg bg-white sm:text-sm focus:z-10 focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600 {% if form.email.errors %}border-red-500 dark:border-red-500{% endif %}"
                                   placeholder="you@site.com"
                                   required>
                            <div class="absolute inset-y-0 start-0 flex items-center pointer-events-none z-20 ps-4">
                                <svg class="shrink-0 size-4 text-gray-400 dark:text-neutral-600" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect width="20" height="16" x="2" y="4" rx="2"></rect>
                                    <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                                </svg>
                            </div>
                        </div>
                        {% if form.email.help_text %}
                            <p class="mt-1 text-xs text-gray-500 dark:text-neutral-500">{{ form.email.help_text }}</p>
                        {% endif %}
                        {% if form.email.errors %}
                            <div class="mt-2 text-xs text-red-600 dark:text-red-500">
                                {{ form.email.errors }}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Имя -->
                    <div>
                        <label for="{{ form.first_name.id_for_label }}" class="mb-2 block text-sm font-medium dark:text-white">
                            {{ form.first_name.label }}
                            {% if form.first_name.field.required %}<span class="text-red-600 dark:text-red-500">*</span>{% endif %}
                        </label>
                        <div class="relative">
                            <input type="text"
                                   name="{{ form.first_name.name }}"
                                   id="{{ form.first_name.id_for_label }}"
                                   value="{{ form.first_name.value|default:'' }}"
                                   class="py-2.5 sm:py-3 px-4 ps-11 block w-full border border-gray-200 rounded-lg bg-white sm:text-sm focus:z-10 focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600 {% if form.first_name.errors %}border-red-500 dark:border-red-500{% endif %}"
                                   placeholder="Введите имя">
                            <div class="absolute inset-y-0 start-0 flex items-center pointer-events-none z-20 ps-4">
                                <svg class="shrink-0 size-4 text-gray-400 dark:text-neutral-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
                                    <path d="M384 112L384 128C384 145.7 369.7 160 352 160L288 160C270.3 160 256 145.7 256 128L256 112L192 112C183.2 112 176 119.2 176 128L176 512C176 520.8 183.2 528 192 528L448 528C456.8 528 464 520.8 464 512L464 128C464 119.2 456.8 112 448 112L384 112zM128 128C128 92.7 156.7 64 192 64L448 64C483.3 64 512 92.7 512 128L512 512C512 547.3 483.3 576 448 576L192 576C156.7 576 128 547.3 128 512L128 128zM288 384L352 384C396.2 384 432 419.8 432 464C432 472.8 424.8 480 416 480L224 480C215.2 480 208 472.8 208 464C208 419.8 243.8 384 288 384zM264 288C264 257.1 289.1 232 320 232C350.9 232 376 257.1 376 288C376 318.9 350.9 344 320 344C289.1 344 264 318.9 264 288z"/>
                                </svg>
                            </div>
                        </div>
                        {% if form.first_name.help_text %}
                            <p class="mt-1 text-xs text-gray-500 dark:text-neutral-500">{{ form.first_name.help_text }}</p>
                        {% endif %}
                        {% if form.first_name.errors %}
                            <div class="mt-2 text-xs text-red-600 dark:text-red-500">
                                {{ form.first_name.errors }}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Фамилия -->
                    <div>
                        <label for="{{ form.last_name.id_for_label }}" class="mb-2 block text-sm font-medium dark:text-white">
                            {{ form.last_name.label }}
                            {% if form.last_name.field.required %}<span class="text-red-600 dark:text-red-500">*</span>{% endif %}
                        </label>
                        <div class="relative">
                            <input type="text"
                                   name="{{ form.last_name.name }}"
                                   id="{{ form.last_name.id_for_label }}"
                                   value="{{ form.last_name.value|default:'' }}"
                                   class="py-2.5 sm:py-3 px-4 ps-11 block w-full border border-gray-200 rounded-lg bg-white sm:text-sm focus:z-10 focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600 {% if form.last_name.errors %}border-red-500 dark:border-red-500{% endif %}"
                                   placeholder="Введите фамилию">
                            <div class="absolute inset-y-0 start-0 flex items-center pointer-events-none z-20 ps-4">
                                <svg class="shrink-0 size-4 text-gray-400 dark:text-neutral-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
                                    <path d="M80 480L80 224L560 224L560 480C560 488.8 552.8 496 544 496L352 496C352 451.8 316.2 416 272 416L208 416C163.8 416 128 451.8 128 496L96 496C87.2 496 80 488.8 80 480zM96 96C60.7 96 32 124.7 32 160L32 480C32 515.3 60.7 544 96 544L544 544C579.3 544 608 515.3 608 480L608 160C608 124.7 579.3 96 544 96L96 96zM240 376C270.9 376 296 350.9 296 320C296 289.1 270.9 264 240 264C209.1 264 184 289.1 184 320C184 350.9 209.1 376 240 376zM408 272C394.7 272 384 282.7 384 296C384 309.3 394.7 320 408 320L488 320C501.3 320 512 309.3 512 296C512 282.7 501.3 272 488 272L408 272zM408 368C394.7 368 384 378.7 384 392C384 405.3 394.7 416 408 416L488 416C501.3 416 512 405.3 512 392C512 378.7 501.3 368 488 368L408 368z"/>
                                </svg>
                            </div>
                        </div>
                        {% if form.last_name.help_text %}
                            <p class="mt-1 text-xs text-gray-500 dark:text-neutral-500">{{ form.last_name.help_text }}</p>
                        {% endif %}
                        {% if form.last_name.errors %}
                            <div class="mt-2 text-xs text-red-600 dark:text-red-500">
                                {{ form.last_name.errors }}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Кнопки -->
                    <div class="flex items-center justify-between mt-6">
                        <a href="{% url 'password_change_form' %}" class="text-sm text-blue-600 hover:text-blue-700 hover:underline dark:text-blue-400 dark:hover:text-blue-300">
                            Изменить пароль
                        </a>
                        <button type="submit" class="py-2.5 px-4 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-neutral-800">
                            Сохранить изменения
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Подписки -->
    <div class="mx-3 mb-8 grid gap-6 md:grid-cols-2">
        <!-- Ваши подписки -->
        <div class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm dark:border-neutral-700 dark:bg-neutral-900">
            <div class="mb-4 flex items-center justify-between">
                <h2 class="text-xl font-semibold text-gray-900 dark:text-white">Ваши подписки</h2>
                <span id="number_of_subscribed_users" class="inline-flex items-center justify-center rounded-full border border-gray-200 bg-gray-50 px-3 py-1 text-sm font-semibold text-gray-700 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-300">
                    {{ number_of_subscribed_users }}
                </span>
            </div>
            <div class="flex flex-col gap-3" id="list_of_subscribed_users">
                {% for user in subscribed_users %}
                    <div class="flex items-center justify-between gap-3 rounded-lg border border-gray-200 bg-gray-50 p-3 dark:border-neutral-700 dark:bg-neutral-800"
                         data-subscribe_type="subscribed"
                         data-user_id="{{ user.id }}">
                        <div class="flex-1 truncate text-sm font-medium text-gray-900 dark:text-white">
                            {{ user.username }}
                        </div>
                        <div class="flex flex-wrap items-center gap-2">
                            <a href="{% url 'share' user.id %}"
                               target="_blank"
                               class="inline-flex items-center gap-x-2 rounded-lg border border-blue-500 bg-white px-3 py-1.5 text-sm font-semibold text-blue-600 transition hover:bg-blue-50 dark:border-blue-400 dark:bg-neutral-900 dark:text-blue-400 dark:hover:bg-blue-500/10"
                               data-user_id="{{ user.id }}">
                                <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
                                    <path d="M96 96C113.7 96 128 110.3 128 128L128 464C128 472.8 135.2 480 144 480L544 480C561.7 480 576 494.3 576 512C576 529.7 561.7 544 544 544L144 544C99.8 544 64 508.2 64 464L64 128C64 110.3 78.3 96 96 96zM208 288C225.7 288 240 302.3 240 320L240 384C240 401.7 225.7 416 208 416C190.3 416 176 401.7 176 384L176 320C176 302.3 190.3 288 208 288zM352 224L352 384C352 401.7 337.7 416 320 416C302.3 416 288 401.7 288 384L288 224C288 206.3 302.3 192 320 192C337.7 192 352 206.3 352 224zM432 256C449.7 256 464 270.3 464 288L464 384C464 401.7 449.7 416 432 416C414.3 416 400 401.7 400 384L400 288C400 270.3 414.3 256 432 256zM576 160L576 384C576 401.7 561.7 416 544 416C526.3 416 512 401.7 512 384L512 160C512 142.3 526.3 128 544 128C561.7 128 576 142.3 576 160z"/>
                                </svg>
                                <span class="hidden 2xl:inline">Статистика</span>
                            </a>
                            <button class="inline-flex items-center gap-x-2 rounded-lg border border-red-500 bg-white px-3 py-1.5 text-sm font-semibold text-red-600 transition hover:bg-red-50 dark:border-red-400 dark:bg-neutral-900 dark:text-red-400 dark:hover:bg-red-500/10 unsubscribeButton"
                                    data-user_id="{{ user.id }}"
                                    data-username="{{ user.username }}"
                                    data-subscribe_type="subscribed"
                                    data-url="{% url 'save_subscribe' %}">
                                <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
                                    <path d="M320 112C434.9 112 528 205.1 528 320C528 434.9 434.9 528 320 528C205.1 528 112 434.9 112 320C112 205.1 205.1 112 320 112zM320 576C461.4 576 576 461.4 576 320C576 178.6 461.4 64 320 64C178.6 64 64 178.6 64 320C64 461.4 178.6 576 320 576zM231 231C221.6 240.4 221.6 255.6 231 264.9L286 319.9L231 374.9C221.6 384.3 221.6 399.5 231 408.8C240.4 418.1 255.6 418.2 264.9 408.8L319.9 353.8L374.9 408.8C384.3 418.2 399.5 418.2 408.8 408.8C418.1 399.4 418.2 384.2 408.8 374.9L353.8 319.9L408.8 264.9C418.2 255.5 418.2 240.3 408.8 231C399.4 221.7 384.2 221.6 374.9 231L319.9 286L264.9 231C255.5 221.6 240.3 221.6 231 231z"/>
                                </svg>
                                <span class="hidden 2xl:inline">Отписаться</span>
                            </button>
                        </div>
                    </div>
                {% empty %}
                    <p class="text-sm text-gray-500 dark:text-neutral-400">Вы ещё не подписались ни на одного пользователя</p>
                {% endfor %}
            </div>
        </div>

        <!-- Подписаны на Вас -->
        <div class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm dark:border-neutral-700 dark:bg-neutral-900">
            <div class="mb-4 flex items-center justify-between">
                <h2 class="text-xl font-semibold text-gray-900 dark:text-white">Подписаны на Вас</h2>
                <span id="number_of_subscriber_users" class="inline-flex items-center justify-center rounded-full border border-gray-200 bg-gray-50 px-3 py-1 text-sm font-semibold text-gray-700 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-300">
                    {{ number_of_subscriber_users }}
                </span>
            </div>
            <div class="flex flex-col gap-3" id="list_of_subscriber_users">
                {% for user in subscriber_users %}
                    <div class="flex items-center justify-between gap-3 rounded-lg border border-gray-200 bg-gray-50 p-3 dark:border-neutral-700 dark:bg-neutral-800"
                         data-user_id="{{ user.id }}">
                        <div class="flex-1 truncate text-sm font-medium text-gray-900 dark:text-white">
                            {% if user.can_subscribe %}
                                <a href="{% url 'share' user.id %}"
                                   class="text-blue-600 hover:text-blue-700 hover:underline dark:text-blue-400 dark:hover:text-blue-300"
                                   target="_blank">
                                    {{ user.username }}
                                </a>
                            {% else %}
                                {{ user.username }}
                            {% endif %}
                        </div>
                        <div class="flex flex-wrap items-center gap-2">
                            <button class="inline-flex items-center gap-x-2 rounded-lg border border-red-500 bg-white px-3 py-1.5 text-sm font-semibold text-red-600 transition hover:bg-red-50 dark:border-red-400 dark:bg-neutral-900 dark:text-red-400 dark:hover:bg-red-500/10 deleteSubscriptionButton"
                                    data-user_id="{{ user.id }}"
                                    data-username="{{ user.username }}">
                                <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
                                    <path d="M262.2 48C248.9 48 236.9 56.3 232.2 68.8L216 112L120 112C106.7 112 96 122.7 96 136C96 149.3 106.7 160 120 160L520 160C533.3 160 544 149.3 544 136C544 122.7 533.3 112 520 112L424 112L407.8 68.8C403.1 56.3 391.2 48 377.8 48L262.2 48zM128 208L128 512C128 547.3 156.7 576 192 576L448 576C483.3 576 512 547.3 512 512L512 208L464 208L464 512C464 520.8 456.8 528 448 528L192 528C183.2 528 176 520.8 176 512L176 208L128 208zM288 280C288 266.7 277.3 256 264 256C250.7 256 240 266.7 240 280L240 456C240 469.3 250.7 480 264 480C277.3 480 288 469.3 288 456L288 280zM400 280C400 266.7 389.3 256 376 256C362.7 256 352 266.7 352 280L352 456C352 469.3 362.7 480 376 480C389.3 480 400 469.3 400 456L400 280z"/>
                                </svg>
                                <span class="hidden xl:inline">Удалить подписку</span>
                            </button>
                        </div>
                    </div>
                {% empty %}
                    <p class="text-sm text-gray-500 dark:text-neutral-400">На Вас ещё не подписался ни один пользователь</p>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- Скрытая кнопка-триггер для открытия модального окна отмены подписки -->
    <button type="button" id="trigger-unsubscribe-modal" class="hidden" data-hs-overlay="#unsubscribeModal"></button>

    <!-- Модальное окно отмены подписки -->
    <div id="unsubscribeModal" class="hs-overlay hidden size-full fixed top-0 start-0 z-[1060] overflow-x-hidden overflow-y-auto pointer-events-none flex items-center justify-center" role="dialog" tabindex="-1" aria-labelledby="unsubscribeModalLabel">
        <div class="hs-overlay-animation-target hs-overlay-open:mt-7 hs-overlay-open:opacity-100 hs-overlay-open:duration-500 mt-0 opacity-0 ease-out transition-all sm:max-w-lg sm:w-full m-3 sm:mx-auto">
            <div class="max-h-full overflow-hidden flex flex-col bg-white border border-gray-200 shadow-2xs rounded-xl pointer-events-auto dark:bg-neutral-800 dark:border-neutral-700 dark:shadow-neutral-700/70">
                <!-- Header -->
                <div class="flex justify-between items-center py-3 px-4 border-b dark:border-neutral-700">
                    <h3 class="font-bold text-gray-800 dark:text-white" id="unsubscribeModalLabel">
                        Отмена подписки
                    </h3>
                    <button type="button" class="flex justify-center items-center size-7 text-sm font-semibold rounded-full border border-transparent text-gray-800 hover:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none dark:text-neutral-200 dark:hover:bg-neutral-700 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600" data-hs-overlay="#unsubscribeModal">
                        <span class="sr-only">Закрыть</span>
                        <svg class="flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="m18 6-12 12"></path>
                            <path d="m6 6 12 12"></path>
                        </svg>
                    </button>
                </div>
                <!-- End Header -->

                <!-- Body -->
                <div class="flex-1 overflow-y-auto p-4">
                    <p class="text-sm text-gray-600 dark:text-neutral-400">
                        Вы действительно хотите отписаться от <strong id="unsubscribeUsername" class="font-semibold text-gray-900 dark:text-white">пользователя</strong>?
                    </p>
                    <p class="mt-2 text-sm text-gray-600 dark:text-neutral-400">
                        После этого у Вас не будет доступа к просмотру городов, посещённых этим пользователем.
                    </p>
                </div>
                <!-- End Body -->

                <!-- Footer -->
                <div class="flex items-center justify-end gap-x-2 py-3 px-4 border-t border-gray-200 dark:border-neutral-700 shrink-0">
                    <button type="button" class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 dark:border-neutral-700 dark:text-white dark:hover:bg-neutral-800" data-hs-overlay="#unsubscribeModal">
                        Отмена
                    </button>
                    <button type="button" class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-red-600 text-white hover:bg-red-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:focus:ring-offset-neutral-800" id="confirmUnsubscribeButton">
                        Отписаться
                    </button>
                </div>
                <!-- End Footer -->
            </div>
        </div>
    </div>

    <!-- Скрытая кнопка-триггер для открытия модального окна удаления подписки -->
    <button type="button" id="trigger-delete-subscription-modal" class="hidden" data-hs-overlay="#deleteSubscriptionModal"></button>

    <!-- Модальное окно удаления подписки -->
    <div id="deleteSubscriptionModal" class="hs-overlay hidden size-full fixed top-0 start-0 z-[1060] overflow-x-hidden overflow-y-auto pointer-events-none flex items-center justify-center" role="dialog" tabindex="-1" aria-labelledby="deleteSubscriptionModalLabel">
        <div class="hs-overlay-animation-target hs-overlay-open:mt-7 hs-overlay-open:opacity-100 hs-overlay-open:duration-500 mt-0 opacity-0 ease-out transition-all sm:max-w-lg sm:w-full m-3 sm:mx-auto">
            <div class="max-h-full overflow-hidden flex flex-col bg-white border border-gray-200 shadow-2xs rounded-xl pointer-events-auto dark:bg-neutral-800 dark:border-neutral-700 dark:shadow-neutral-700/70">
                <!-- Header -->
                <div class="flex justify-between items-center py-3 px-4 border-b dark:border-neutral-700">
                    <h3 class="font-bold text-gray-800 dark:text-white" id="deleteSubscriptionModalLabel">
                        Удалить подписку на Вас?
                    </h3>
                    <button type="button" class="flex justify-center items-center size-7 text-sm font-semibold rounded-full border border-transparent text-gray-800 hover:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none dark:text-neutral-200 dark:hover:bg-neutral-700 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600" data-hs-overlay="#deleteSubscriptionModal">
                        <span class="sr-only">Закрыть</span>
                        <svg class="flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="m18 6-12 12"></path>
                            <path d="m6 6 12 12"></path>
                        </svg>
                    </button>
                </div>
                <!-- End Header -->

                <!-- Body -->
                <div class="flex-1 overflow-y-auto p-4">
                    <p class="text-sm text-gray-600 dark:text-neutral-400">
                        Вы действительно хотите удалить подписку <strong id="deleteSubscriptionUsername" class="font-semibold text-gray-900 dark:text-white">пользователя</strong> на Вас?
                    </p>
                    <p class="mt-2 text-sm text-gray-600 dark:text-neutral-400">
                        После этого он (она) не сможет наблюдать за Вашими посещёнными городами.
                    </p>
                    <p class="mt-2 text-sm text-gray-600 dark:text-neutral-400">
                        Но сможет повторно подписаться на Вас, если Вы поделитесь с ним (ней) ссылкой на свою статистику.
                    </p>
                </div>
                <!-- End Body -->

                <!-- Footer -->
                <div class="flex items-center justify-end gap-x-2 py-3 px-4 border-t border-gray-200 dark:border-neutral-700 shrink-0">
                    <button type="button" class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 dark:border-neutral-700 dark:text-white dark:hover:bg-neutral-800" data-hs-overlay="#deleteSubscriptionModal">
                        Отмена
                    </button>
                    <button type="button" class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-red-600 text-white hover:bg-red-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:focus:ring-offset-neutral-800" id="confirmDeleteSubscriptionButton" data-user_id="{{ user.id }}">
                        Удалить
                    </button>
                </div>
                <!-- End Footer -->
            </div>
        </div>
    </div>

    <script>
        window.USER_ID = "{{ request.user.id }}";
    </script>
    {% vite_asset 'js/entries/profile.js' %}
{% endblock %}
