{% extends 'base.html' %}
{% load vite %}

{% block extra_css %}
    {{ block.super }}
    {% vite_css 'css/tailwind' %}
    {% vite_css 'css/content_image_gallery' %}
{% endblock %}

{% block extra_js %}
    {{ block.super }}
    {% vite_asset 'js/entries/content_image_gallery.js' %}
{% endblock %}

{% block content %}
    <!-- Заголовок и хлебные крошки -->
    <header class="mx-3 mt-10 mb-6" id="block-page_header">
        <h1 class="flex items-end justify-center text-center text-3xl font-bold tracking-tight text-gray-900 dark:text-white">
            {{ article.title }}
        </h1>
        <nav aria-label="Хлебные крошки" class="flex justify-center mt-6">
            <ol class="flex flex-wrap items-center justify-center whitespace-nowrap py-2 border-y border-gray-200 dark:border-neutral-700 text-sm">
                <li class="inline-flex items-center font-semibold text-gray-900 dark:text-white">
                    <a class="flex items-center text-gray-600 hover:text-blue-600 focus:outline-none focus:text-blue-600 dark:text-neutral-400 dark:hover:text-blue-400 dark:focus:text-blue-400" href="{% url 'blog-list' %}">
                        <svg class="shrink-0 mr-3 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                            <line x1="16" x2="8" y1="13" y2="13"/>
                            <line x1="16" x2="8" y1="17" y2="17"/>
                            <line x1="10" x2="8" y1="9" y2="9"/>
                        </svg>
                        Все статьи
                    </a>
                </li>
            </ol>
        </nav>
    </header>

    <div class="mx-3 mb-8 flex justify-center">
        <div class="w-full max-w-4xl">
            <article class="rounded-xl border border-gray-200 bg-white p-6 shadow-sm dark:border-neutral-700 dark:bg-neutral-900" id="article_{{ article.id }}">
                <div class="mb-4 flex flex-wrap items-center gap-4 text-sm text-gray-600 dark:text-neutral-400">
                    {% if article.city %}
                        <a href="{{ article.city.get_absolute_url }}"
                           class="inline-flex items-center gap-1.5 rounded-full border border-orange-300 bg-orange-100 px-2.5 py-0.5 text-xs font-medium text-orange-800 hover:bg-orange-200 dark:border-orange-500/40 dark:bg-orange-500/20 dark:text-orange-300 dark:hover:bg-orange-500/30">
                            <svg class="size-3.5 shrink-0" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
                            </svg>
                            {{ article.city.title }}
                        </a>
                    {% endif %}
                    {% if article.tags.exists %}
                        <div class="flex flex-wrap items-center gap-1.5">
                            {% for tag in article.tags.all %}
                                <a href="{% url 'blog-list-by-tag' tag_slug=tag.slug %}"
                                   class="inline-flex items-center gap-1.5 rounded-full border border-gray-300 bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-700 hover:bg-gray-200 dark:border-neutral-600 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-600">
                                    <svg class="size-3.5 shrink-0" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a2.25 2.25 0 0 0 .33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z" />
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 6h.008v.008H6V6Z" />
                                    </svg>
                                    {{ tag.name }}
                                </a>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                <div class="content-with-image-gallery article-detail-content text-gray-900 dark:text-white [&_h1]:text-2xl [&_h1]:font-bold [&_h1]:mb-4 [&_h2]:text-xl [&_h2]:font-semibold [&_h2]:mb-3 [&_h2]:mt-5 [&_h3]:text-lg [&_h3]:font-semibold [&_h3]:mb-2 [&_h3]:mt-4 [&_p]:mb-4 [&_ul]:list-disc [&_ul]:ml-6 [&_ul]:mb-4 [&_ol]:list-decimal [&_ol]:ml-6 [&_ol]:mb-4 [&_a]:text-blue-600 [&_a]:dark:text-blue-400 [&_a]:hover:underline [&_strong]:font-semibold [&_code]:bg-gray-100 [&_code]:dark:bg-neutral-800 [&_code]:px-1.5 [&_code]:py-0.5 [&_code]:rounded [&_code]:text-sm [&_code]:font-mono [&_pre]:bg-gray-100 [&_pre]:dark:bg-neutral-800 [&_pre]:p-4 [&_pre]:rounded-lg [&_pre]:overflow-x-auto [&_pre]:mb-4 [&_img]:rounded-lg [&_img]:cursor-pointer [&_img]:transition-opacity [&_img]:duration-200 [&_img]:hover:opacity-90">
                    {{ article.content|safe }}
                </div>
                <hr class="my-4 border-gray-200 dark:border-neutral-700">
                <div class="text-sm text-gray-600 dark:text-neutral-400">
                    <span class="font-medium">Создано:</span>
                    <span>{{ article.created_at }}</span>
                </div>
            </article>
        </div>
    </div>
{% endblock %}
